<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content=rgba(0,0,0,0)><meta name=generator content="Hexo 6.3.0"><link rel=preconnect href=//fonts.loli.net crossorigin><link rel=preconnect href=null//null crossorigin><link rel=preconnect href=https://cdn.jsdelivr.net crossorigin><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><link rel=mask-icon href=/images/logo.svg color=rgba(0,0,0,0)><link rel=manifest href=/images/manifest.json><link rel=stylesheet href=/css/main.css><link rel=stylesheet href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/orange/pace-theme-big-counter.css><script src=https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin=anonymous></script><script class=next-config data-name=main type=application/json>{"hostname":"blog.ohayo.live","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"buttons","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Load Disqus","order":-1}},"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src=/js/config.js></script><meta name=description content="此篇记录一下前段时间折腾路由器的经历。哈哈哈哈哈，真是太爽了，路由器这东西，真上头。 📍  选择路由器 我选的是红米ax6，这款路由器，可以说是理财产品了，哈哈哈哈，价格一直涨，二手原价卖。就离谱。 我主要是看重它以下几点  芯片好，高通的芯片，散热刚刚滴~ 支持wifi6 穿墙也不错  加上看好碰见小米商城有货，我直接手起刀落。 长个样子。   刷openwrt openwrt一个开源的路由器"><meta property=og:type content=blog><meta property=og:title content=折腾红米ax6><meta property=og:url content=https://blog.ohayo.live/log/redmiAx6/index.html><meta property=og:site_name content="ohayo&#39;s blog"><meta property=og:description content="此篇记录一下前段时间折腾路由器的经历。哈哈哈哈哈，真是太爽了，路由器这东西，真上头。 📍  选择路由器 我选的是红米ax6，这款路由器，可以说是理财产品了，哈哈哈哈，价格一直涨，二手原价卖。就离谱。 我主要是看重它以下几点  芯片好，高通的芯片，散热刚刚滴~ 支持wifi6 穿墙也不错  加上看好碰见小米商城有货，我直接手起刀落。 长个样子。   刷openwrt openwrt一个开源的路由器"><meta property=og:locale content=zh_CN><meta property=og:image content=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220505005059497.png><meta property=og:image content=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430210845243.png><meta property=og:image content=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430212942511.png><meta property=og:image content=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430213828289.png><meta property=og:image content=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430222656166.png><meta property=og:image content=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430222926530.png><meta property=og:image content=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430223040679.png><meta property=og:image content=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430223440228.png><meta property=article:published_time content=2022-04-30T12:47:11.000Z><meta property=article:modified_time content=2022-12-17T16:46:05.642Z><meta property=article:author content=ohayo><meta property=article:tag content=log><meta name=twitter:card content=summary><meta name=twitter:image content=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220505005059497.png><link rel=canonical href=https://blog.ohayo.live/log/redmiAx6/ ><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.ohayo.live/log/redmiAx6/","path":"log/redmiAx6/","title":"折腾红米ax6"}</script><script class=next-config data-name=calendar type=application/json>""</script><title>折腾红米ax6 | ohayo's blog</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切换导航栏 role=button><span class=toggle-line></span> <span class=toggle-line></span> <span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><p class=site-title>ohayo's blog</p><i class=logo-line></i></a></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-journal"><a href=/categories/journal/index.html rel=section><i class="fa fa-book-journal-whills fa-fw"></i>Journal</a></li><li class="menu-item menu-item-test"><a href=https://test.ohayo.live/ rel=noopener target=_blank><i class="fa fa-book fa-fw"></i>Test</a></li><li class="menu-item menu-item-friend"><a href=/friends/index.html rel=section><i class="fa fa-link fa-fw"></i>Friend</a></li><li class="menu-item menu-item-about"><a href=/about/index.html rel=section><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-search"><a role=button class=popup-trigger><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span> <span class=toggle-line></span> <span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class=nav><li class="nav-item nav-level-1"><a class=nav-link href=#%E9%80%89%E6%8B%A9%E8%B7%AF%E7%94%B1%E5%99%A8><span class=nav-number>1.</span> <span class=nav-text>选择路由器</span></a></li><li class="nav-item nav-level-1"><a class=nav-link href=#%E5%88%B7openwrt><span class=nav-number>2.</span> <span class=nav-text>刷openwrt</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%A7%A3%E9%94%81ssh><span class=nav-number>2.1.</span> <span class=nav-text>解锁SSH</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%88%B7%E5%85%A5openwrt><span class=nav-number>2.2.</span> <span class=nav-text>刷入openwrt</span></a></li></ol></li><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%8E%A5%E5%85%A5%E6%A0%A1%E5%9B%AD%E7%BD%91><span class=nav-number>3.</span> <span class=nav-text>接入校园网</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=ohayo src=/images/avatar.png><p class=site-author-name itemprop=name>ohayo</p><div class=site-description itemprop=description></div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/ ><span class=site-state-item-count>17</span> <span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/ ><span class=site-state-item-count>11</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/ ><span class=site-state-item-count>10</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class=links-of-author-item><a href=https://github.com/zhu-jiyuan title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zhu-jiyuan" rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class=links-of-author-item><a href=mailto:ohayo1213@outlook.com title="E-Mail → mailto:ohayo1213@outlook.com" rel=noopener target=_blank><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class=links-of-author-item><a href=/atom.xml title="RSS → &#x2F;atom.xml"><i class="fa-solid fa-square-rss fa-fw"></i>RSS</a></span></div></div></div><div class="back-to-top animated" role=button aria-label=返回顶部><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class=sidebar-dimmer></div></header><div class=reading-progress-bar></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang=zh-CN><link itemprop=mainEntityOfPage href=https://blog.ohayo.live/log/redmiAx6/ ><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content=/images/avatar.png><meta itemprop=name content=ohayo></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ohayo's blog"><meta itemprop=description content=""></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="折腾红米ax6 | ohayo's blog"><meta itemprop=description content=""></span><header class=post-header><h1 class=post-title itemprop="name headline">折腾红米ax6</h1><div class=post-meta-container><div class=post-meta><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i> </span><span class=post-meta-item-text>发表于</span> <time title="创建时间：2022-04-30 20:47:11" itemprop="dateCreated datePublished" datetime=2022-04-30T20:47:11+08:00>2022-04-30</time> </span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i> </span><span class=post-meta-item-text>更新于</span> <time title="修改时间：2022-12-18 00:46:05" itemprop=dateModified datetime=2022-12-18T00:46:05+08:00>2022-12-18</time> </span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder"></i> </span><span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/log/ itemprop=url rel=index><span itemprop=name>log</span></a> </span></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-comment"></i> </span><span class=post-meta-item-text>Disqus：</span> <a title=disqus href=/log/redmiAx6/#disqus_thread itemprop=discussionUrl><span class="post-comments-count disqus-comment-count" data-disqus-identifier=log/redmiAx6/ itemprop=commentCount></span></a></span></div></div></header><div class=post-body itemprop=articleBody><p>此篇记录一下前段时间折腾路由器的经历。哈哈哈哈哈，真是太爽了，路由器这东西，真上头。</p><p>📍</p><h1 id=选择路由器><a class=markdownIt-Anchor href=#选择路由器></a> 选择路由器</h1><p>我选的是红米ax6，这款路由器，可以说是理财产品了，哈哈哈哈，价格一直涨，二手原价卖。就离谱。</p><p>我主要是看重它以下几点</p><ul><li>芯片好，高通的芯片，散热刚刚滴~</li><li>支持wifi6</li><li>穿墙也不错</li></ul><p>加上看好碰见小米商城有货，我直接手起刀落。</p><p>长个样子。</p><p><img data-src=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220505005059497.png alt=image-20220505005059497></p><h1 id=刷openwrt><a class=markdownIt-Anchor href=#刷openwrt></a> 刷openwrt</h1><p>openwrt一个开源的路由器系统，可玩性强，深受“大家”喜爱，我也不例外，诶~，年轻就是折腾。</p><p>我用的openwrt是直接在恩山下载一个网友的。不得不说，英雄所见略同。这个网友和我一样，只有一个需求，就是能科学上网就行啦。</p><p><img data-src=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430210845243.png alt=image-20220430210845243></p><p>插件这块大家可以自己装啦。</p><p>米家的固件实在是苦不堪言，红米ax6跑千M网和玩一样，根本没有压力。我选择openwrt更高的自由度。</p><h2 id=解锁ssh><a class=markdownIt-Anchor href=#解锁ssh></a> 解锁SSH</h2><p>ax6最难刷机的原因就是SSH太难解。</p><p>我是参考的b站这位网友给的教程，解锁的。<a target=_blank rel=noopener href=https://www.bilibili.com/video/BV1q94y1f7fj>视频链接</a></p><p>我不是特别喜欢这个视频的风格，所以这里我简单概括一下他说的这些东西。</p><ol><li><p>将AX6的固件降级为1.0.18版本</p></li><li><p>红米ax6解锁需要一个openwrt路由（能上网的）。</p></li><li><p>用虚拟机搭建一个openwrt系统的虚拟路由，就是开一个虚拟机。配置网络环境虚拟机网络环境</p></li><li><p>上传wireless.sh文件到虚拟机，执行 sh /root/wireless.sh</p><pre class="line-numbers language-bash" data-language=bash><code class=language-bash><span class="token comment">#wireless.sh如下</span>
<span class="token comment">#!/bin/ash</span>
<span class="token comment"># SPDX-License-Identifier: GPL-3.0-only</span>
<span class="token comment">#</span>
<span class="token comment"># Copyright (C) 2020 yyjdelete</span>
<span class="token comment"># Copyright (C) 2021 Robert Marko &lt;robimarko@gmail.com></span>
<span class="token comment"># Copyright (C) 2021 Tianling Shen &lt;cnsztl@immortalwrt.org></span>
<span class="token comment">#</span>
<span class="token comment"># Original threads:</span>
<span class="token comment"># Redmi AX6 AX3000: https://www.right.com.cn/forum/thread-4060726-1-1.html</span>
<span class="token comment"># Xiaomi AX6000/AX9000: https://forum.openwrt.org/t/openwrt-support-for-xiaomi-ax9000/98908/34</span>

<span class="token assign-left variable">info_font</span><span class="token operator">=</span><span class="token string">"<span class="token entity" title=\033>\033</span>[36m[Info]<span class="token entity" title=\033>\033</span>[0m"</span>
<span class="token assign-left variable">success_font</span><span class="token operator">=</span><span class="token string">"<span class="token entity" title=\033>\033</span>[32m[Success]<span class="token entity" title=\033>\033</span>[0m"</span>
<span class="token assign-left variable">warning_font</span><span class="token operator">=</span><span class="token string">"<span class="token entity" title=\033>\033</span>[33m[Warning]<span class="token entity" title=\033>\033</span>[0m"</span>

<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;warning_font&#125;</span> Please make sure your router has wireless support!"</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;warning_font&#125;</span> Please make sure your router is restored to factory settings (not configured)!"</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;warning_font&#125;</span> Please make sure you've backed up the network and wireless settings!"</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;warning_font&#125;</span> Please make sure you've connected the router via *wired ethernet*!"</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;warning_font&#125;</span> Running this script will change your *network* settings!"</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Use Ctrl+C to exit or press enter key to continue..."</span>

<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">""</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;info_font&#125;</span> Adding xqsystem controller..."</span>
<span class="token function">cat</span> <span class="token operator">></span> <span class="token string">"/usr/lib/lua/luci/controller/admin/xqsystem.lua"</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF
module("luci.controller.admin.xqsystem", package.seeall)

function index()
    local page   = node("api")
    page.target  = firstchild()
    page.title   = ("")
    page.order   = 100
    page.index = true
    page   = node("api","xqsystem")
    page.target  = firstchild()
    page.title   = ("")
    page.order   = 100
    page.index = true
    entry(&#123;"api", "xqsystem", "token"&#125;, call("getToken"), (""), 103, 0x08)
end

local LuciHttp = require("luci.http")

function getToken()
    local result = &#123;&#125;
    result["code"] = 0
    result["token"] = "; nvram set ssh_en=1; nvram set uart_en=1; nvram set boot_wait=on; nvram commit; uci set wireless.@wifi-iface[0].key=\<span class="token variable"><span class="token variable">`</span>mkxqimage -I<span class="token punctuation">\</span><span class="token variable">`</span></span>; uci commit; sed -i 's/channel=.*/channel=<span class="token entity" title=\&quot;>\"</span>debug<span class="token entity" title=\&quot;>\"</span>/g' /etc/init.d/dropbear; /etc/init.d/dropbear start;"
    LuciHttp.write_json(result)
end
EOF</span>

<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;info_font&#125;</span> Changing network settings..."</span>
<span class="token builtin class-name">set</span> <span class="token parameter variable">-x</span>
<span class="token comment"># /etc/config/dhcp</span>
uci <span class="token builtin class-name">set</span> <span class="token assign-left variable">dhcp.lan.ra_management</span><span class="token operator">=</span><span class="token string">'1'</span>
uci del dhcp.lan.start
uci del dhcp.lan.limit
uci del dhcp.lan.leasetime
uci <span class="token builtin class-name">set</span> <span class="token assign-left variable">dhcp.lan.ignore</span><span class="token operator">=</span><span class="token string">'1'</span>
<span class="token comment"># /etc/config/network</span>
uci <span class="token builtin class-name">set</span> <span class="token assign-left variable">network.lan.ipaddr</span><span class="token operator">=</span><span class="token string">'169.254.31.1'</span>
uci <span class="token parameter variable">-q</span> commit
<span class="token builtin class-name">set</span> +x

<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;success_font&#125;</span> All settings are applied.<span class="token entity" title=\n>\n</span>"</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;info_font&#125;</span> Please now disconnect from this router, and connect to your Xiaomi/Redmi router."</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">""</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;info_font&#125;</span> For Xiaomi AX3000/AX6000/AX9000:"</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"       Open your browser, access the following URL:"</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"         http://192.168.31.1/cgi-bin/luci/;stok=&lt;STOK>/api/xqsystem/extendwifi_connect_inited_router?ssid=MEDIATEK-ARM-IS-GREAT&amp;password=ARE-YOU-OK&amp;admin_username=root&amp;admin_password=admin&amp;admin_nonce=xxx"</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">""</span>


<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">""</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable">$&#123;warning_font&#125;</span> Restarting network..."</span>
wifi reload <span class="token operator">></span><span class="token string">"/dev/null"</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span>
/etc/init.d/network restart <span class="token operator">></span><span class="token string">"/dev/null"</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>打开windows移动热点，这时候电脑就会多出来一个网卡（这个热点的）</p></li><li><p>把刚刚刷好的openwrt桥接到windows热点上。ps:热点必须联网</p></li><li><p>登录AX6，复制当前AX6后台链接中 “stock=” 后面的字符串；</p></li><li><p>替换链接中相应的数据后，复制到浏览器点击回车，解锁SSH；<br><a target=_blank rel=noopener href="http://192.168.31.1/cgi-bin/luci/;stok=">http://192.168.31.1/cgi-bin/luci/;stok=</a><stock>/api/xqsystem/extendwifi_connect_inited_router?ssid=op&amp;password=12345678&amp;admin_username=root&amp;admin_password=password&amp;admin_nonce=xxx</stock></p></li><li><p>提示解锁成功之后，再次登录ax6后台，5G频段路由密码，就是SSH密码了</p></li></ol><p>到这里SSH就解锁了。</p><h2 id=刷入openwrt><a class=markdownIt-Anchor href=#刷入openwrt></a> 刷入openwrt</h2><p>红米ax6有两个系统分区，你在0区，就把openwrt刷到0区，反之刷到1区。</p><p>就是说，你在0分区刷，固件会上传到1分区。你在1分区刷，固件会上传到0分区。所以刷之前要切换分区先。</p><p>我这里没扩容，因为第一次刷的那个路由器变砖了，我在网上没找到很完善的扩容方案。不扩容只能刷30m以下的哈，超过会变砖，用小米官方的刷机软件可求回来。但是扩容刷机失败，不能用小米官网的刷机求了。。。</p><p>这样就不会出现变砖的情况了。</p><p>下面以1分区举例</p><ol><li><p>检测当前分区</p><pre class="line-numbers language-bash" data-language=bash><code class=language-bash>nvram get flag_last_success<span aria-hidden=true class=line-numbers-rows><span></span></span></code></pre></li><li><p>切换分区</p><pre class="line-numbers language-bash" data-language=bash><code class=language-bash>nvram <span class="token builtin class-name">set</span> <span class="token assign-left variable">flag_last_success</span><span class="token operator">=</span><span class="token number">0</span>
nvram <span class="token builtin class-name">set</span> <span class="token assign-left variable">flag_boot_rootfs</span><span class="token operator">=</span><span class="token number">0</span>
nvram commit
<span class="token function">reboot</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>把openwrt的固件上传到/tmp下面，第一次上传.ubi后缀的文件的哈<img data-src=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430212942511.png alt=image-20220430212942511></p></li><li><p>刷入固件</p><pre class="line-numbers language-bash" data-language=bash><code class=language-bash>ubiformat /dev/mtd13 <span class="token parameter variable">-y</span> <span class="token parameter variable">-f</span> /tmp/你上传的固件文件名<span aria-hidden=true class=line-numbers-rows><span></span></span></code></pre></li><li><p>切换分区</p><pre class="line-numbers language-bash" data-language=bash><code class=language-bash>nvram <span class="token builtin class-name">set</span> <span class="token assign-left variable">flag_last_success</span><span class="token operator">=</span><span class="token number">1</span>
nvram <span class="token builtin class-name">set</span> <span class="token assign-left variable">flag_boot_rootfs</span><span class="token operator">=</span><span class="token number">1</span>
nvram commit
<span class="token function">reboot</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p>结束。</p><p>剩下的就是切换不同系统的代码了</p><pre class="line-numbers language-bash" data-language=bash><code class=language-bash>OP切换到小米系统
fw_setenv  flag_last_success <span class="token number">0</span>
fw_setenv flag_boot_rootfs <span class="token number">0</span>
<span class="token function">reboot</span>

小米系统切换到OP
nvram <span class="token builtin class-name">set</span> <span class="token assign-left variable">flag_last_success</span><span class="token operator">=</span><span class="token number">1</span>
nvram <span class="token builtin class-name">set</span> <span class="token assign-left variable">flag_boot_rootfs</span><span class="token operator">=</span><span class="token number">1</span>
nvram commit
<span class="token function">reboot</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img data-src=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430213828289.png alt=image-20220430213828289></p><p>我想解锁完ssh之后就已经实现完全自由啦。还有什么是比一个linux更自由的呢~</p><h1 id=接入校园网><a class=markdownIt-Anchor href=#接入校园网></a> 接入校园网</h1><p>河南师范大学的校园网，狗的一，一个账号一个设备。这能行吗？？？咱就是说，一百个不同意。</p><p>ax6有两个频段，5G和2.4G，学校的也是分这俩个频段。</p><p>这里要科普一下这个5G和2.4G频段哈。这里是频率，不是我们手机上说的那个5G时代哈。</p><ul><li><p>5G频段在信号强距离时，抗干扰能力远大于2.4G，其下载速度和上传速度明显哈。</p></li><li><p>2.4G频段信号范围比较广哈，穿墙效果更好。</p></li></ul><p>其实从物理也可得出来啦，5G频段，频率大了，波长短了，衍射效果不好，粒子性更强。波长大的，会更易绕过墙壁等障碍物。</p><p>我所在的寝室校园网5G很好。</p><p><img data-src=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430222656166.png alt=image-20220430222656166></p><p>我的方案是，用路由器的5G信道，连接到校园网5G网上，在ssh连接路由器，curl命令，发送一个post请求，完成web认证。之后用路由器的2.4G频段就可以上网了。</p><p><img data-src=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430222926530.png alt=image-20220430222926530></p><p><img data-src=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430223040679.png alt=image-20220430223040679></p><p><img data-src=https://cdn.jsdelivr.net/gh/zhu-jiyuan/picture_go/img/image-20220430223440228.png alt=image-20220430223440228></p><p>在定时运行这个shell脚本，就可以让路由器一直使用学校的校园网啦。</p><p>速度与直连校园网无差别。十分nice</p><p>唉，先到这吧，学校没有ipv6，难受了，加上我的笔记本没法插网线，没法远程开机，难受~。让我们上了研究生再写这篇文章吧。</p></div><footer class=post-footer><div class=post-tags><a href=/tags/log/ rel=tag># log</a></div><div class=post-nav><div class=post-nav-item><a href=/CS/cpp/c-five-zone/ rel=prev title=c++的四大区><i class="fa fa-chevron-left"></i> c++的四大区</a></div><div class=post-nav-item><a href=/soft/quantumultx/quantumult-x-and-js/ rel=next title="Quantumult X的JavaScript编写">Quantumult X的JavaScript编写 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class=comments id=disqus_thread><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy; <span itemprop=copyrightYear>2022</span> <span class=with-love><i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>ohayo</span></div><div class=powered-by>由 <a href=https://hexo.io/ rel=noopener target=_blank>Hexo</a> & <a href=https://theme-next.js.org/ rel=noopener target=_blank>NexT.Gemini</a> 强力驱动</div></div></footer><script src=https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin=anonymous></script><script src=/js/comments.js></script><script src=/js/utils.js></script><script src=/js/next-boot.js></script><script src=https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin=anonymous></script><script src=/js/third-party/search/local-search.js></script><script src=/js/third-party/pace.js></script><script class=next-config data-name=enableMath type=application/json>false</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css integrity="sha256-TThEtR+XalhWKkfF383YLOrI50NGNeIqrzS+q08afrY=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/copy-tex.min.css integrity="sha256-Wk20U9mS/kHGcSgkjSiRezW5exqT6wAOKwySOaLotXM=" crossorigin=anonymous><script class=next-config data-name=katex type=application/json>{"copy_tex_js":{"url":"https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/copy-tex.min.js","integrity":"sha256-etSqbSVF4+Lwe8MGk/Vanc1sR+mWv+qOG73fxWw9p94="}}</script><script src=/js/third-party/math/katex.js></script><script class=next-config data-name=disqus type=application/json>{"enable":true,"shortname":"ohayo1213","count":true,"i18n":{"disqus":"disqus"}}</script><script src=/js/third-party/comments/disqus.js></script></body></html>